<?php

class ModeleClasse extends CI_Model

{


	/**********************************************************************
	**                           Constructeur                            **
	**********************************************************************/

	public function __construct()
	{
	    $this->load->database();
    }


	/*********************************************************************************************************************************************/
	/*********************************************************************************************************************************************/
	/*********************************************************************************************************************************************/
	/**************************                                                                              *************************************/
	/**************************                  SELECT () DE NOTRE TABLE GE_CLASSE                          *************************************/
	/**************************                                                                              *************************************/
	/*********************************************************************************************************************************************/
	/*********************************************************************************************************************************************/
	/*********************************************************************************************************************************************/




	
	public function retournerClasse()
	{
	   	$this->db->select('*');
		$this->db->from('ge_classe');   
		$maListe = $this->db->get();		
		return $maListe->result_array();
		
	} 
	public function retournerinfoClasse($NoClasse)
	{
	   	$this->db->select('*');
		$this->db->from('ge_classe');
		$this->db->where('ge_classe.NoClasse',$NoClasse);   
		$maListe = $this->db->get();		
		return $maListe->row();
		
	} 
	public function nbEleveParClasse()
	{
		$this->db->select('ge_classe.NoClasse,Nom,COUNT(*) as NbEleves');
		$this->db->from('ge_classe');
		$this->db->join('ge_appartenir','ge_appartenir.NoClasse=ge_classe.NoClasse');
		$this->db->group_by(array('NoClasse','Nom'));   
		$maListe = $this->db->get();		
		return $maListe->result();
	}

	public function presenceEnfantDansUneClasse($donnees)
	{
		$this->db->select('*');
		$this->db->from('ge_appartenir');
		$this->db->where('ge_appartenir.NoClasse',$donnees['NoClasse']);
		$this->db->where('ge_appartenir.NoEnfant',$donnees['NoEnfant']); 
		$maListe = $this->db->get();
		if ($maListe->num_rows() > 0)
      	{
        	return true;
      	}
      	else  
      	{
         	return false;
      	}
	}
	/*********************************************************************************************************************************************/
	/*********************************************************************************************************************************************/
	/*********************************************************************************************************************************************/
	/**************************                                                                              *************************************/
	/**************************                   INSERT () DE NOTRE TABLE GE_CLASSE                         *************************************/
	/**************************                                                                              *************************************/
	/*********************************************************************************************************************************************/
	/*********************************************************************************************************************************************/
	/*********************************************************************************************************************************************/

	public function insertEnfantDansClasse($donnees)
	{
		return $this->db->insert('ge_appartenir',$donnees);
	}


	/*********************************************************************************************************************************************/
	/*********************************************************************************************************************************************/
	/*********************************************************************************************************************************************/
	/**************************                                                                              *************************************/
	/**************************                   DROP () DE NOTRE TABLE GE_CLASSE                         *************************************/
	/**************************                                                                              *************************************/
	/*********************************************************************************************************************************************/
	/*********************************************************************************************************************************************/
	/*********************************************************************************************************************************************/
	


	

	/*********************************************************************************************************************************************/
	/*********************************************************************************************************************************************/
	/*********************************************************************************************************************************************/
	/**************************                                                                              *************************************/
	/**************************                     UPDATE () DE NOTRE TABLE GE_CLASSE                       *************************************/
	/**************************                                                                              *************************************/
	/*********************************************************************************************************************************************/
	/*********************************************************************************************************************************************/
	/*********************************************************************************************************************************************/

	public function modifierAppartenir($donnees)
   	{        
    	$this->db->where('NoClasse', $donnees['NoClasse']);
      	$this->db->where('NoEnfant', $donnees['NoEnfant']);
      	return $this->db->update('ge_appartenir', $donnees);
   	}
}